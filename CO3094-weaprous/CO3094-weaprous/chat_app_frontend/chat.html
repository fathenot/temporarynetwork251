<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Real Chat UI</title>
<style>
  :root {
    --bg: #0e1621;
    --panel: #1a2433;
    --bubble-in: #202c3b;
    --bubble-out: #0078ff;
    --muted: #a1acb9;
    --accent: #0078ff;
    font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  * { box-sizing: border-box; }
  html, body { height: 100%; margin: 0; background: var(--bg); color: #fff; }

  .app {
    display: grid;
    grid-template-columns: 300px 1fr;
    height: 100vh;
    background: var(--panel);
    border: 1px solid rgba(255,255,255,0.05);
  }

  /* Sidebar */
  .sidebar {
    background: #151e2b;
    border-right: 1px solid rgba(255,255,255,0.08);
    display: flex;
    flex-direction: column;
  }

  .sidebar-header {
    padding: 16px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    font-weight: 700;
    font-size: 18px;
  }

  .users {
    flex: 1;
    overflow-y: auto;
  }

  .user-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    cursor: pointer;
    transition: background 0.2s;
  }
  .user-item:hover {
    background: rgba(255,255,255,0.05);
  }
  .user-item.active {
    background: rgba(0,120,255,0.15);
  }
  .avatar {
    width: 38px;
    height: 38px;
    border-radius: 50%;
    background: #2a3a4f;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
  }
  .username { font-weight: 600; }

  /* Chat area */
  .chat {
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  .chat-header {
    padding: 14px 18px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .messages {
    flex: 1;
    overflow-y: auto;
    padding: 18px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: var(--panel);
  }

  .message {
    display: flex;
    align-items: flex-end;
    gap: 8px;
    max-width: 75%;
    animation: fadeIn 0.2s ease;
  }
  .message.in { align-self: flex-start; }
  .message.out { align-self: flex-end; flex-direction: row-reverse; }

  .bubble {
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.4;
    word-wrap: break-word;
  }
  .in .bubble {
    background: var(--bubble-in);
    border-bottom-left-radius: 4px;
  }
  .out .bubble {
    background: var(--bubble-out);
    border-bottom-right-radius: 4px;
  }
  .time {
    font-size: 11px;
    color: var(--muted);
    margin: 2px 6px;
  }

  .composer {
    display: flex;
    padding: 10px 14px;
    gap: 10px;
    border-top: 1px solid rgba(255,255,255,0.08);
    background: rgba(0,0,0,0.15);
  }

  textarea {
    flex: 1;
    resize: none;
    background: rgba(255,255,255,0.05);
    border: none;
    border-radius: 20px;
    color: #fff;
    padding: 10px 14px;
    font-size: 15px;
    outline: none;
  }

  button {
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 46px;
    height: 46px;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.2s;
  }

  button:hover { background: #3399ff; }

  .typing {
    font-size: 13px;
    color: var(--muted);
    padding: 4px 10px;
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    align-self: flex-start;
    animation: blink 1.2s infinite;
  }

  @keyframes fadeIn { from { opacity: 0; transform: translateY(4px);} to { opacity: 1; transform: translateY(0);} }
  @keyframes blink { 50% { opacity: 0.4; } }
</style>
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <div class="sidebar-header">Contacts</div>
    <div class="users" id="userList">
      <div class="user-item active" data-id="1">
        <div class="avatar">AI</div>
        <div class="username">Assistant</div>
      </div>
      <div class="user-item" data-id="2">
        <div class="avatar">JD</div>
        <div class="username">John Doe</div>
      </div>
    </div>
  </aside>

  <section class="chat">
    <div class="chat-header">
      <div id="chatWith">Assistant</div>
    </div>

    <div class="messages" id="messages"></div>

    <div class="composer">
      <textarea id="input" placeholder="Type a message..."></textarea>
      <button id="send">âž¤</button>
    </div>
  </section>
</div>

<script>
const messagesEl = document.getElementById('messages');
const inputEl = document.getElementById('input');
const sendBtn = document.getElementById('send');
const userList = document.getElementById('userList');
const chatWith = document.getElementById('chatWith');

function escapeHtml(s){return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;')}

function createMessage(text, who='in') {
  const msg = document.createElement('div');
  msg.className = 'message ' + who;
  msg.innerHTML = `<div class="bubble">${escapeHtml(text)}</div><div class="time">${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</div>`;
  return msg;
}

function appendMessage(text, who='in') {
  const node = createMessage(text, who);
  messagesEl.appendChild(node);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function mockReply(userText) {
  const typing = document.createElement('div');
  typing.className = 'typing';
  typing.textContent = `${chatWith.textContent} is typing...`;
  messagesEl.appendChild(typing);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return new Promise(resolve => {
    setTimeout(() => {
      messagesEl.removeChild(typing);
      let reply = "Hmm, interesting.";
      if(userText.toLowerCase().includes("hi")) reply = "Hello there ðŸ‘‹";
      if(userText.toLowerCase().includes("how are")) reply = "I'm fine, thanks!";
      if(userText.toLowerCase().includes("bye")) reply = "Goodbye!";
      appendMessage(reply, 'in');
      resolve(reply);
    }, 900 + Math.random()*600);
  });
}

sendBtn.addEventListener('click', async ()=>{
  const text = inputEl.value.trim();
  if(!text) return;
  appendMessage(text, 'out');
  inputEl.value = '';
  inputEl.focus();
  try { await mockReply(text); } catch { appendMessage('Error: failed to send message', 'in'); }
});

inputEl.addEventListener('keydown', e => {
  if(e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendBtn.click();
  }
});

userList.addEventListener('click', e => {
  const item = e.target.closest('.user-item');
  if(!item) return;
  document.querySelectorAll('.user-item').forEach(n => n.classList.remove('active'));
  item.classList.add('active');
  chatWith.textContent = item.querySelector('.username').textContent;
  messagesEl.innerHTML = '';
  appendMessage(`Now chatting with ${chatWith.textContent}`, 'in');
});

appendMessage("Hey! I'm your assistant. How can I help?", 'in');
inputEl.focus();
</script>
</body>
</html>
